{"version":3,"sources":["webpack:///./src/views/SignDoc.vue?f9bb","webpack:///src/views/SignDoc.vue","webpack:///./src/views/SignDoc.vue?31ce","webpack:///./src/views/SignDoc.vue","webpack:///./src/views/config.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fill-height","fluid","grid-list-xl","justify-center","wrap","xs12","md8","color","title","text","on","submit","formSubmit","py-0","staticClass","_v","multiple","label","chips","deletable-chips","model","value","callback","$$v","emails","expression","type","name","id","change","updateDocument","updateKeyFile","text-xs-right","disabled","length","validDocFile","validKeyFile","staticRenderFns","SignDocvue_type_script_lang_js_","data","privateKey","publicKey","docFile","created","undefined","$route","query","split","methods","e","target","files","_this","reader","FileReader","file","onload","result","flashMessage","error","message","readAsText","_this2","preventDefault","bodyFormData","FormData","set","join","append","axios_default","a","post","concat","config_default","HOST","headers","Content-Type","then","res","hasOwnProperty","msg","success","document","getElementById","catch","console","log","views_SignDocvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","module","exports"],"mappings":"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","file":"js/chunk-277b0587.a30c76b9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fill-height\":\"\",\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('FlashMessage'),_c('v-layout',{attrs:{\"justify-center\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"md8\":\"\"}},[_c('material-card',{attrs:{\"color\":\"green\",\"title\":\"Подпись нового документа\",\"text\":\"Заполните указанные поля\"}},[_c('v-form',{on:{\"submit\":_vm.formSubmit}},[_c('v-container',{attrs:{\"py-0\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('p',{staticClass:\"text-info\"},[_vm._v(\"Введите почтовые адреса подписантов через Enter. Допускается минимум 2 участника.\")]),_c('v-combobox',{attrs:{\"multiple\":\"\",\"color\":\"purple\",\"label\":\"Signer's emails\",\"chips\":\"\",\"deletable-chips\":\"\"},model:{value:(_vm.emails),callback:function ($$v) {_vm.emails=$$v},expression:\"emails\"}})],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('p',{staticClass:\"text-info\"},[_vm._v(\"Выберите документ для подписи\")]),_c('input',{attrs:{\"type\":\"file\",\"name\":\"document\",\"id\":\"document\"},on:{\"change\":_vm.updateDocument}})]),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('p',{staticClass:\"text-info\"},[_vm._v(\"Выберите файл ключей для подписи\")]),_c('input',{attrs:{\"type\":\"file\",\"name\":\"keyfile\",\"id\":\"keyfile\"},on:{\"change\":_vm.updateKeyFile}})]),_c('v-flex',{attrs:{\"xs12\":\"\",\"text-xs-right\":\"\"}},[_c('v-btn',{staticClass:\"mx-0 font-weight-light\",attrs:{\"type\":\"submit\",\"disabled\":_vm.emails.length < 2 || _vm.validDocFile == false || _vm.validKeyFile == false,\"color\":\"success\"}},[_vm._v(\"Подтвердить подпись\")])],1)],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fill-height fluid grid-list-xl>\n    <FlashMessage></FlashMessage>\n    <v-layout justify-center wrap>\n      <v-flex xs12 md8>\n        <material-card\n          color=\"green\"\n          title=\"Подпись нового документа\"\n          text=\"Заполните указанные поля\"\n        >\n          <v-form @submit=\"formSubmit\">\n            <v-container py-0>\n              <v-layout wrap>\n                <v-flex xs12>\n                  <p\n                    class=\"text-info\"\n                  >Введите почтовые адреса подписантов через Enter. Допускается минимум 2 участника.</p>\n                  <v-combobox\n                    multiple\n                    v-model=\"emails\"\n                    color=\"purple\"\n                    label=\"Signer's emails\"\n                    chips\n                    deletable-chips\n                  ></v-combobox>\n                </v-flex>\n                <v-flex xs12>\n                  <p class=\"text-info\">Выберите документ для подписи</p>\n                  <input type=\"file\" name=\"document\" id=\"document\" @change=\"updateDocument\">\n                </v-flex>\n                <v-flex xs12>\n                  <p class=\"text-info\">Выберите файл ключей для подписи</p>\n                  <input type=\"file\" name=\"keyfile\" id=\"keyfile\" @change=\"updateKeyFile\">\n                </v-flex>\n                <v-flex xs12 text-xs-right>\n                  <v-btn\n                    type=\"submit\"\n                    :disabled=\"emails.length < 2 || validDocFile == false || validKeyFile == false\"\n                    class=\"mx-0 font-weight-light\"\n                    color=\"success\"\n                  >Подтвердить подпись</v-btn>\n                </v-flex>\n              </v-layout>\n            </v-container>\n          </v-form>\n        </material-card>\n      </v-flex>\n    </v-layout>\n  </v-container>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport config from \"./config\";\nexport default {\n  name: \"SignDoc\",\n  data() {\n    return {\n      privateKey: \"\",\n      validDocFile: false,\n      validKeyFile: false,\n      publicKey: \"\",\n      docFile: {},\n      emails: []\n    };\n  },\n  created: function() {\n    if (this.$route.query.emails != undefined) {\n      this.emails = this.$route.query.emails.split(\",\");\n    }\n  },\n  methods: {\n    updateDocument(e) {\n      if (e.target.files[0]) {\n        this.docFile = e.target.files[0];\n        this.validDocFile = true;\n      } else {\n        this.validDocFile = false;\n      }\n    },\n    updateKeyFile(e) {\n      if (e.target.files[0]) {\n        const reader = new FileReader();\n        var file = e.target.files[0];\n        reader.onload = e => {\n          this.privateKey = e.target.result.split(\"~12345~\")[0];\n          this.publicKey = e.target.result.split(\"~12345~\")[1];\n          if (this.publicKey == undefined || this.privateKey == undefined) {\n            this.validKeyFile = false;\n            this.flashMessage.error({\n              title: \"Что-то пошло не так\",\n              message:\n                \"Выбранный файл ключей имеет некорректную структуру. Попробуйте другой\"\n            });\n          }\n        };\n        reader.readAsText(file);\n        this.validKeyFile = true;\n      } else {\n        this.validKeyFile = false;\n      }\n    },\n    formSubmit(e) {\n      e.preventDefault();\n      var bodyFormData = new FormData();\n      bodyFormData.set(\"publicKey\", this.publicKey);\n      bodyFormData.set(\"privateKey\", this.privateKey);\n      bodyFormData.set(\"signers\", this.emails.join());\n      bodyFormData.append(\"document\", this.docFile);\n      axios\n        .post(`http://${config.HOST}/myroutes/signdoc`, bodyFormData, {\n          headers: { \"Content-Type\": \"multipart/form-data\" }\n        })\n        .then(res => {\n          if (res.data.hasOwnProperty(\"msg\")) {\n            this.flashMessage.error({\n              title: \"Что-то пошло не так\",\n              message: res.data.msg\n            });\n          } else {\n            this.flashMessage.success({\n              title: \"Подпись документа завершена\",\n              message:\n                \"Уведомление о данном событии будет разослано всем участникам подписания\"\n            });\n            this.emails = [];\n            document.getElementById(\"document\").value = \"\";\n            document.getElementById(\"keyfile\").value = \"\";\n          }\n        })\n        .catch(error => {\n          console.log(error);\n        });\n    }\n  }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignDoc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignDoc.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SignDoc.vue?vue&type=template&id=772459c8&\"\nimport script from \"./SignDoc.vue?vue&type=script&lang=js&\"\nexport * from \"./SignDoc.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = {\n  HOST: \"139.59.135.176\"\n};\n"],"sourceRoot":""}